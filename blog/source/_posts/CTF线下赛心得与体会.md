---
title: CTF线下赛心得与体会
date: 2017-11-01 07:49:52
tags: [CTF, 线下攻防, AWD, 渗透]
categories: 省信安
---
上个星期刚刚打完了省赛，很有感触。
比赛分上下午两个时间段，上午和下午的靶场环境是不同的，30分钟一轮flag。
上午主办方给了我们一个windows server一个linux给我们维护，windows server我们因为没有玩过所以被检测到挂了后门，但是后来听说只有一个队找出了windows server的漏洞然后打全场，可怕，然后貌似只有我们的windows被打宕了一轮扣了30分。linux的话听说那个web服务简单，我们上了qmm的waf然后没有队打进来。上午3个小时的比赛结束了。
然后下午更换靶场环境，主办方给了我们两个linux服务器，一个是1.21一个是1.22。
21一开始没有找到服务，/var/www/html下面空无一物，然后用nmap扫描服务器查看服务和开放端口终于发现服务开放在8080端口，目录在/var/lib/tomacat/wordpress/
下；22的服务能在/var/www/html下找到。找到服务后开始审源码找服务漏洞，在这段时间貌似我们一直在被打后来查到有人在我们的mysql中嵌入了木马，然后一直拿分，后来学长查到了数据库的密码让我去改的时候其实mysql数据库已经崩了，我改的是另一个数据库的密码。
好像就是这样了，我们一直在被吊打。但是有dalao在，我们还是拿到了第7，不过我怎么高兴不起来。
最后总结一下：这次比赛所有电脑可以看成在一个子网内，也就是说用户和用户之间也可以ping通，但是我想如果你不是dalao应该不会去在时间这么紧张的情况下想着
不去打服务器而是个人电脑，说实话如果你的电脑没有瞎开什么服务除非别人有0day，不然能打进来我吃键盘好吧。
比赛刚开始的时候会有30分钟的加固时间，在这段时间内你最先要做的事情就是改ssh密码，万一被别人登陆上来就不好玩了。改完密码然后找服务查端
口，找到服务后审源码找漏洞，找到漏洞patch后写打全场的exp，这些都最好要在这30分钟内完成.还有就是一定要记得备份，要是自己的web服务被别人打宕了记得把文件补全后再叫主办方重启服务器(其实有root权限可以自己重启)。30分钟一过可以运行一些防御脚本比如文件监控什么的，万一别人在你服务器中藏马你要发现的了；还有比较重要的是审流量，这次比赛因为给了我们root权限，所以我们能运行tcpdump命令把服务器网卡接受到的流量dump保存下来传
到主机上用wireshark分析一波，这样我们可以发现是谁在打我们，怎么打的我们，于是我们就能及时查找到漏洞所在并patch，运气好的话我们还能把别人打我们的流量分析一波提取出exp然后去打别的队。还有就是数据库，数据库和web服务关联是很大的，我们可以去网站源文件中找调用了数据库用户和密码的文件，这样就可以知道数据库
用户名和密码，然后改完自己数据库的root密码后打别的队，比如数据库种马什么的。
好像只想到这么多，等想到了什么再加上去。
最后还是感慨自己还是太菜了，明明什么都不会，还是喜欢一天到晚到处瞎逼逼。而且不注重实践，想来有哪个黑客是没有日过实站的？自己还是naive。

